<?xml version="1.0" encoding="UTF-8"?>
<sec id="Sec4" class="sec">
 <div class="title" xmlns="http://www.w3.org/1999/xhtml">Stock-and-flow simulation model</div>
 <sec id="Sec5" class="sec">
  <div class="title" xmlns="http://www.w3.org/1999/xhtml">Stocks and flows</div>
  <p id="Par17" xmlns="http://www.w3.org/1999/xhtml">A detailed stock-and-flow diagram was constructed based on the CLD, and equations and parameters were entered for all variables. The stock-and-flow diagram thus represents the system of hypothesized causal relationships in the system (i.e. the causal factors that determine smoking behavior). System Dynamics models are broken up into a series of “stocks” (a terminology used in system dynamics that refers to some quantity that can accumulate, e.g. people in different stages of addiction, such as experimental smokers) and “flows” (transition rates between stocks, e.g. smoking initiation rates that describe transitioning from a never-smoker to an experimenter), and is especially appropriate for systems that contain positive or negative feedback relationships and show dynamic (i.e. changing over time) behavior (e.g. declining rates of cigarette use over time) [
   <a ref-type="bibr" rid="CR30" href="#CR30">30</a>]. The stocks represent mutually-exclusive categories of smokers: never-smokers, experimenters, former experimenters, current smokers, and ex-smokers. The distinction between experimenters and smokers was the commonly used criterion of 100 cigarettes/lifetime [
   <a ref-type="bibr" rid="CR40" href="#CR40">40</a>] for characterizing lifetime smoking status; thus, once an individual becomes a smoker, he/she cannot again become an experimenter. The distinction between current and former smoking behavior (for both experimenters and current smokers) was any smoking in the past 30 days.
  </p>
  <p id="Par18" xmlns="http://www.w3.org/1999/xhtml">These stocks were changed through their corresponding inflows and outflows: smoking initiation, smoking progression, cessation, and relapse. The modeling task, therefore, was to hypothesize how the risk factors influence these flows that in turn, change the levels of the stocks. Figure 
   <a rid="Fig3" ref-type="fig" href="#Fig3">3</a> shows a simplified version of the stock-and-flow model; the full model with all structure and equations is available online [
   <a ref-type="bibr" rid="CR41" href="#CR41">41</a>]. 
   <div id="Fig3" class="fig">
    <span class="label">Fig. 3</span>
    <div class="caption">
     <p>Simplified stock-and-flow diagram of smoking behavior. Experimenters: smoked &lt; 100 cigarettes/lifetime. Smokers: smoked ≥100 cigarettes/lifetime; current smokers/experimenters: smoked within past 30 days; ex-smokers: did not smoke within past 30 days</p>
    </div>
    <div xlink:href="13011_2019_219_Fig3_HTML" id="MO3" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
   </div>
  </p>
 </sec>
 <sec id="Sec6" class="sec">
  <div class="title" xmlns="http://www.w3.org/1999/xhtml">Model structure</div>
  <p id="Par19" xmlns="http://www.w3.org/1999/xhtml">Using variables and feedback relationships from the CLD, a stock-and-flow simulation was then developed to model the initiation and progression of smoking behavior among youth. The crux of the model is an “aging chain” representing different categories of smokers as “stocks” and transitions between these categories as “flows.” Different age groups representing middle school or younger (ages 11–14) and high school (ages 15–18) were modeled in parallel through the use of array variables, to reflect this common age distinction in national surveys such as Monitoring the Future [
   <a ref-type="bibr" rid="CR42" href="#CR42">42</a>].
  </p>
  <p id="Par20" xmlns="http://www.w3.org/1999/xhtml">The model was built and run using Stella (Systems Thinking, Experimental Learning Laboratory with Animation) Architect, version 1.3.1. Stella Architect is produced by Isee Systems, one of the leading developers of system dynamics software. This software is frequently used in educational settings [
   <a ref-type="bibr" rid="CR43" href="#CR43">43</a>] as well as research settings [
   <a ref-type="bibr" rid="CR44" href="#CR44">44</a>]. Stella reaches its results through numeric approximation of a series of differential equations. Specifically, values of stocks are calculated as a function of their initial value (a parameter set by the user) and the integration of net inflows and net outflows, which are in turn determined by their user-specified equations and other variable inputs. Stella uses numeric approximation at each time step (a user-determined fraction of the underlying time unit) and calculates throughout the chosen range of time.
  </p>
 </sec>
</sec>
