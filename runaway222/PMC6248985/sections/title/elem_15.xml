<?xml version="1.0" encoding="UTF-8"?>
<sec id="sec012" class="sec">
 <div class="title" xmlns="http://www.w3.org/1999/xhtml">Computational simulation model</div>
 <p xmlns="http://www.w3.org/1999/xhtml">The MAS model in this study was created based on the conceptual logic and principals representing the real-world behaviors of an urban water distribution infrastructure system. The creation of a computation representation for all the input and output parameters of the conceptual model entails constructing mathematical algorithms to match the conceptual logic representing the behaviors of water distribution infrastructure. The computational representation of the MAS model was developed in an object-oriented programming platform (i.e., AnyLogic 7). It integrates the institutional actors’ renewal decision-making processes with the physical infrastructure performance in order to assess the long-term resilience behavior of water distribution infrastructure system under different stressors (e.g., user population changes) and various scenarios (e.g., renewal strategies). A numerical case of a water distribution network composed of 180 miles of pipes with different materials and age categories was used to create the computational simulation model that captures the dynamics of the system to examine its resilience. The population in the service area of this case is 113,000 (60,000 households). This MAS model of the water distribution infrastructure system includes three classes of agents: water pipeline network, water users, and utility agency, each of which is simulated in the model as an object (i.e., function, variable, or data structure that has memory in the computational model). 
  <a ref-type="fig" rid="pone.0207674.g004" href="#pone.0207674.g004">Fig 4</a> depicts the Unified Modeling Language (UML) class diagram of the computational MAS model and summarizes the information regarding the attributes and functions implemented.
 </p>
 <div id="pone.0207674.g004" orientation="portrait" position="float" class="fig" xmlns="http://www.w3.org/1999/xhtml">
  <span pub-id-type="doi" class="object-id">10.1371/journal.pone.0207674.g004</span>
  <span class="label">Fig 4</span>
  <div class="caption">
   <div class="title">Unified Modeling Language (UML) class diagram of the model.</div>
  </div>
  <div xlink:href="pone.0207674.g004" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
 </div>
 <p xmlns="http://www.w3.org/1999/xhtml">The relationships among agent classes and their attributes are based on the existing literature and empirical information. 
  <a ref-type="fig" rid="pone.0207674.g004" href="#pone.0207674.g004">Fig 4</a> shows the attributes, functions, and relationships among different agent classes. The following subsections represent the mathematical implementation for the model agents and their attributes.
 </p>
 <sec id="sec013" class="sec">
  <div class="title" xmlns="http://www.w3.org/1999/xhtml">Pipeline network agent</div>
  <p xmlns="http://www.w3.org/1999/xhtml">The pipeline network agent includes different pipe classes with a defined total length (in miles) divided into 5 condition (age) group states (
   <span class="italic">i</span> = 20,40,60,80,100). For each group, which represents a certain condition level, there is a defined material (e.g., percentage of PVC and CIP type). Deterioration of pipes is modeled based on their age. As pipes age, their condition group may change; every year, 5 percent of pipes in each condition group (except condition group 100) moves to the next condition group. Another mechanism that affects the transition of pipes into different condition group states is pipe renewal. Based on the renewal decision-making outcomes of the agency agent (which is explained later), a certain percentage of pipes is renewed and moves from condition group 100 to condition group 20, annually. 
   <a ref-type="fig" rid="pone.0207674.g005" href="#pone.0207674.g005">Fig 5</a> depicts the modeling deterioration mechanism of pipes in the model.
  </p>
  <div id="pone.0207674.g005" orientation="portrait" position="float" class="fig" xmlns="http://www.w3.org/1999/xhtml">
   <span pub-id-type="doi" class="object-id">10.1371/journal.pone.0207674.g005</span>
   <span class="label">Fig 5</span>
   <div class="caption">
    <div class="title">Modeling physical pipeline deterioration process.</div>
   </div>
   <div xlink:href="pone.0207674.g005" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
  </div>
  <p xmlns="http://www.w3.org/1999/xhtml">The aging of the pipes is also reflected in the changes in the percentage of materials for each group. At the beginning of simulation, the model starts with a defined percentage of PVC and CIP pipes for each group. As pipes age, these percentages change (because renewal is by PVC). Based on the portion of pipe length in each condition group, the model computes the network average condition (
   <div id="pone.0207674.e001" class="inline-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e001.jpg" id="pone.0207674.e001g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M1" class="math">
      <div accent="true" class="mover">
       <div class="mrow">
        <span class="mi">C</span>
       </div>
       <span class="mo">¯</span>
      </div>
     </div>
    </div>
   </div>) using 
   <a ref-type="disp-formula" rid="pone.0207674.e002" href="#pone.0207674.e002">Eq 1</a> [
   <a rid="pone.0207674.ref043" ref-type="bibr" href="#pone.0207674.ref043">43</a>]: 
   <div id="pone.0207674.e002" class="disp-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e002.jpg" id="pone.0207674.e002g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M2" class="math">
      <div class="mrow">
       <div accent="true" class="mover">
        <span class="mi">C</span>
        <span class="mo">¯</span>
       </div>
       <span class="mo">=</span>
       <div class="mfrac">
        <div class="mrow">
         <div class="msub">
          <div displaystyle="false" class="mstyle">
           <span class="mo">∑</span>
          </div>
          <span class="mi">i</span>
         </div>
         <span stretchy="false" class="mo">(</span>
         <div class="msub">
          <span class="mi">l</span>
          <span class="mi">i</span>
         </div>
         <span class="mo">*</span>
         <span class="mi">i</span>
         <span stretchy="false" class="mo">)</span>
        </div>
        <div class="mrow">
         <div class="msub">
          <span class="mi">L</span>
          <span class="mi">N</span>
         </div>
        </div>
       </div>
       <span width="1em" class="mspace"/>
       <div class="mrow">
        <span class="mo">(</span>
        <div class="mrow">
         <span class="mi">i</span>
         <span class="mo">=</span>
         <span class="mn">20</span>
         <span class="mo">,</span>
         <span class="mn">40</span>
         <span class="mo">,</span>
         <span class="mn">60</span>
         <span class="mo">,</span>
         <span width="0.25em" class="mspace"/>
         <span class="mn">80</span>
         <span class="mo">,</span>
         <span class="mn">100</span>
        </div>
        <span class="mo">)</span>
       </div>
      </div>
     </div>
    </div>
    <span class="label">(1)</span>
   </div> where 
   <span class="italic">l</span>
   <sub>
    <span class="italic">i</span>
   </sub> and 
   <span class="italic">L</span>
   <sub>
    <span class="italic">N</span>
   </sub> are the total length of pipes (mile) in condition group 
   <span class="italic">i</span> and in the network, respectively. The other attributes of the pipeline network agent include breakage, leakage, and service reliability. Breakage is modeled using a stochastic process that determines the frequency of pipe breaks during one year. The frequency of breaks for each mile of pipes is a function of pipe’s material and age. The model uses a Poisson Process with a mean rate of break (
   <span class="italic">λ</span>) (shown in 
   <a ref-type="disp-formula" rid="pone.0207674.e003" href="#pone.0207674.e003">Eq 2</a>) to calculate the annual frequency of pipe breaks per each mile of pipeline. In 
   <a ref-type="disp-formula" rid="pone.0207674.e003" href="#pone.0207674.e003">Eq 2</a>, the Lambda (
   <span class="italic">λ</span>) represents the mean rate of break per mile per year [
   <a rid="pone.0207674.ref044" ref-type="bibr" href="#pone.0207674.ref044">44</a>]: 
   <div id="pone.0207674.e003" class="disp-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e003.jpg" id="pone.0207674.e003g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M3" class="math">
      <div class="mrow">
       <span class="mi">λ</span>
       <span class="mo">=</span>
       <div class="msub">
        <span class="mi">N</span>
        <span class="mn">0</span>
       </div>
       <span class="mo">.</span>
       <div class="msup">
        <span class="mi">e</span>
        <div class="mrow">
         <span class="mi">g</span>
         <div class="mrow">
          <span class="mo">(</span>
          <div class="mrow">
           <span class="mi">i</span>
           <span class="mo">−</span>
           <span class="mn">10</span>
          </div>
          <span class="mo">)</span>
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>
    <span class="label">(2)</span>
   </div> where 
   <span class="italic">N</span>
   <sub>0</sub> is the initial number of breaks per mile per year in a new pipe, 
   <span class="italic">g</span> is the growth rate which is 0.07 for PVC and 0.078 for CIP pipes [
   <a rid="pone.0207674.ref045" ref-type="bibr" href="#pone.0207674.ref045">45</a>], and 
   <span class="italic">i</span> is the pipe’s condition group. The total number of breaks in the network per year (
   <span class="italic">N</span>
   <sub>
    <span class="italic">B</span>
   </sub>) would be sum of the breaks in each mile of the entire network pipes. The annual water loss due to network breaks is calculated using 
   <a ref-type="disp-formula" rid="pone.0207674.e004" href="#pone.0207674.e004">Eq 3</a> [
   <a rid="pone.0207674.ref046" ref-type="bibr" href="#pone.0207674.ref046">46</a>]: 
   <div id="pone.0207674.e004" class="disp-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e004.jpg" id="pone.0207674.e004g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M4" class="math">
      <div class="mrow">
       <span class="mi">W</span>
       <div class="msub">
        <span class="mi">L</span>
        <span class="mi">B</span>
       </div>
       <span class="mo">=</span>
       <span class="mn">1440</span>
       <span class="mo">*</span>
       <div class="msub">
        <span class="mi">N</span>
        <span class="mi">B</span>
       </div>
       <span class="mo">*</span>
       <div accent="true" class="mover">
        <span class="mi">F</span>
        <span class="mo">¯</span>
       </div>
       <span class="mo">*</span>
       <span class="mi">d</span>
       <span class="mo">*</span>
       <div class="msqrt">
        <div class="mrow">
         <div accent="true" class="mover">
          <span class="mi">P</span>
          <span class="mo">¯</span>
         </div>
         <span class="mo">/</span>
         <span class="mn">70</span>
        </div>
       </div>
      </div>
     </div>
    </div>
    <span class="label">(3)</span>
   </div> where, 
   <span class="italic">WL</span>
   <sub>
    <span class="italic">B</span>
   </sub> is the annual water loss due to network breaks (gallon), 
   <span class="italic">N</span>
   <sub>
    <span class="italic">B</span>
   </sub> is the total number of annual breaks, 
   <div id="pone.0207674.e005" class="inline-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e005.jpg" id="pone.0207674.e005g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M5" class="math">
      <div accent="true" class="mover">
       <div class="mrow">
        <span class="mi">F</span>
       </div>
       <span class="mo">¯</span>
      </div>
     </div>
    </div>
   </div> is the network average flow rate (gallon per minute), 
   <span class="italic">d</span> is the total duration of disruption due to break (day), and 
   <div id="pone.0207674.e006" class="inline-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e006.jpg" id="pone.0207674.e006g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M6" class="math">
      <div accent="true" class="mover">
       <div class="mrow">
        <span class="mi">P</span>
       </div>
       <span class="mo">¯</span>
      </div>
     </div>
    </div>
   </div> is the network average pressure (psi). 
   <div id="pone.0207674.e007" class="inline-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e007.jpg" id="pone.0207674.e007g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M7" class="math">
      <div accent="true" class="mover">
       <div class="mrow">
        <span class="mi">F</span>
       </div>
       <span class="mo">¯</span>
      </div>
      <span class="mo">,</span>
      <div accent="true" class="mover">
       <div class="mrow">
        <span class="mi">P</span>
       </div>
       <span class="mo">¯</span>
      </div>
     </div>
    </div>
   </div>, and 
   <span class="italic">d</span> are user-defined input parameters into the model.
  </p>
  <p xmlns="http://www.w3.org/1999/xhtml">Similarly, network leakage is determined as total water volume lost in the network, which is a fraction of annual water demand. Leakage rate (
   <span class="italic">LR</span>), which is a unitless variable, depends on network average condition (
   <div id="pone.0207674.e008" class="inline-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e008.jpg" id="pone.0207674.e008g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M8" class="math">
      <div accent="true" class="mover">
       <div class="mrow">
        <span class="mi">C</span>
       </div>
       <span class="mo">¯</span>
      </div>
     </div>
    </div>
   </div>) and is calculated using 
   <a ref-type="disp-formula" rid="pone.0207674.e009" href="#pone.0207674.e009">Eq 4</a> [
   <a rid="pone.0207674.ref047" ref-type="bibr" href="#pone.0207674.ref047">47</a>]: 
   <div id="pone.0207674.e009" class="disp-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e009.jpg" id="pone.0207674.e009g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M9" class="math">
      <div class="mrow">
       <span class="mi">L</span>
       <span class="mi">R</span>
       <span class="mo">=</span>
       <span class="mn">0.00075</span>
       <span class="mo">*</span>
       <div class="msup">
        <span class="mi">e</span>
        <div class="mrow">
         <div accent="true" class="mover">
          <span class="mi">C</span>
          <span class="mo">¯</span>
         </div>
         <div class="mrow">
          <span class="mo">(</span>
          <div class="mrow">
           <span class="mn">0.07</span>
           <span class="mi">P</span>
           <span class="mi">V</span>
           <span class="mi">C</span>
           <span class="mo">+</span>
           <span class="mn">0.078</span>
           <span class="mi">C</span>
           <span class="mi">I</span>
           <span class="mi">P</span>
          </div>
          <span class="mo">)</span>
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>
    <span class="label">(4)</span>
   </div> where 
   <span class="italic">PVC</span> and 
   <span class="italic">CIP</span> are the fractions of pipeline network with each material type. Accordingly, the annual water loss due to network leakage is determined by 
   <a ref-type="disp-formula" rid="pone.0207674.e010" href="#pone.0207674.e010">Eq 5</a>: 
   <div id="pone.0207674.e010" class="disp-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e010.jpg" id="pone.0207674.e010g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M10" class="math">
      <div class="mrow">
       <span class="mi">W</span>
       <div class="msub">
        <span class="mi">L</span>
        <span class="mi">L</span>
       </div>
       <span class="mo">=</span>
       <span class="mi">L</span>
       <span class="mi">R</span>
       <span class="mo">*</span>
       <span class="mi">D</span>
      </div>
     </div>
    </div>
    <span class="label">(5)</span>
   </div> where 
   <span class="italic">WL</span>
   <sub>
    <span class="italic">L</span>
   </sub> and 
   <span class="italic">D</span> denote the annual water loss due to network leakage (gallon) and the annual water demand (gallon), respectively.
  </p>
  <p xmlns="http://www.w3.org/1999/xhtml">Considering the total water loss in the network due to both breakage and leakage, annual water supply (
   <span class="italic">S</span>), which represents the delivered water to users (gallon per year), is calculated using 
   <a ref-type="disp-formula" rid="pone.0207674.e011" href="#pone.0207674.e011">Eq 6</a>: 
   <div id="pone.0207674.e011" class="disp-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e011.jpg" id="pone.0207674.e011g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M11" class="math">
      <div class="mrow">
       <span class="mi">S</span>
       <span class="mo">=</span>
       <span class="mi">D</span>
       <span class="mo">−</span>
       <div class="mrow">
        <span class="mo">(</span>
        <div class="mrow">
         <span class="mi">W</span>
         <div class="msub">
          <span class="mi">L</span>
          <span class="mi">B</span>
         </div>
         <span class="mo">+</span>
         <span class="mi">W</span>
         <div class="msub">
          <span class="mi">L</span>
          <span class="mi">L</span>
         </div>
        </div>
        <span class="mo">)</span>
       </div>
      </div>
     </div>
    </div>
    <span class="label">(6)</span>
   </div>
  </p>
  <p xmlns="http://www.w3.org/1999/xhtml">In order to determine whether the supply of water transported by the pipes can meet the given demand, a service reliability (
   <span class="italic">SR</span>) parameter is defined. This parameter represents the extent to which the supplied water through the network met the demand. To determine 
   <span class="italic">SR</span>, in each year (
   <span class="italic">t</span>) the cumulative supply is divided by the cumulative demand and this gives the service reliability until that year (
   <span class="italic">SR</span>
   <sub>
    <span class="italic">t</span>
   </sub>) based on 
   <a ref-type="disp-formula" rid="pone.0207674.e012" href="#pone.0207674.e012">Eq 7</a>: 
   <div id="pone.0207674.e012" class="disp-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e012.jpg" id="pone.0207674.e012g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M12" class="math">
      <div class="mrow">
       <span class="mi">S</span>
       <div class="msub">
        <span class="mi">R</span>
        <span class="mi">t</span>
       </div>
       <span class="mo">=</span>
       <div class="mfrac">
        <div class="mrow">
         <div class="msubsup">
          <div displaystyle="false" class="mstyle">
           <span class="mo">∑</span>
          </div>
          <div class="mrow">
           <span class="mi">j</span>
           <span class="mo">=</span>
           <span class="mn">1</span>
          </div>
          <span class="mi">t</span>
         </div>
         <div class="msub">
          <span class="mi">S</span>
          <span class="mi">j</span>
         </div>
        </div>
        <div class="mrow">
         <div class="msubsup">
          <div displaystyle="false" class="mstyle">
           <span class="mo">∑</span>
          </div>
          <div class="mrow">
           <span class="mi">j</span>
           <span class="mo">=</span>
           <span class="mn">1</span>
          </div>
          <span class="mi">t</span>
         </div>
         <div class="msub">
          <span class="mi">D</span>
          <span class="mi">j</span>
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>
    <span class="label">(7)</span>
   </div> where 
   <span class="italic">S</span>
   <sub>
    <span class="italic">j</span>
   </sub> and 
   <span class="italic">D</span>
   <sub>
    <span class="italic">j</span>
   </sub> are delivered water and water demand (gallon) in year j, respectively.
  </p>
 </sec>
 <sec id="sec014" class="sec">
  <div class="title" xmlns="http://www.w3.org/1999/xhtml">Users agent</div>
  <p xmlns="http://www.w3.org/1999/xhtml">The agent of users represents population (
   <span class="italic">P</span>) and number of households (
   <span class="italic">N</span>
   <sub>
    <span class="italic">h</span>
   </sub>) consuming water from the given pipeline network, which determine the amount of water (gallons) demanded from the network. In each year, water demand (
   <span class="italic">D</span>
   <sub>
    <span class="italic">t</span>
   </sub>) is assumed to be the average indoor water demand (gallon/year) which is calculated using 
   <a ref-type="disp-formula" rid="pone.0207674.e013" href="#pone.0207674.e013">Eq 8</a> [
   <a rid="pone.0207674.ref048" ref-type="bibr" href="#pone.0207674.ref048">48</a>]: 
   <div id="pone.0207674.e013" class="disp-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e013.jpg" id="pone.0207674.e013g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M13" class="math">
      <div class="mrow">
       <div class="msub">
        <span class="mi">D</span>
        <span class="mi">t</span>
       </div>
       <span class="mo">=</span>
       <span class="mn">87.4</span>
       <div class="msup">
        <div class="mrow">
         <div class="mrow">
          <span class="mo">(</span>
          <div class="mrow">
           <div class="mfrac">
            <div class="mrow">
             <div class="msub">
              <span class="mi">P</span>
              <span class="mi">t</span>
             </div>
            </div>
            <div class="mrow">
             <div class="msub">
              <span class="mi">N</span>
              <span class="mi">h</span>
             </div>
            </div>
           </div>
          </div>
          <span class="mo">)</span>
         </div>
        </div>
        <div class="mrow">
         <span class="mn">0.69</span>
        </div>
       </div>
       <span class="mo">*</span>
       <div class="msub">
        <span class="mi">N</span>
        <span class="mi">h</span>
       </div>
       <span class="mo">*</span>
       <span class="mn">365</span>
      </div>
     </div>
    </div>
    <span class="label">(8)</span>
   </div>
  </p>
  <p xmlns="http://www.w3.org/1999/xhtml">Population (
   <span class="italic">P</span>
   <sub>
    <span class="italic">t</span>
   </sub>) is changed in each year based on the user-defined values of growth/decline rate (r) and base population (
   <span class="italic">P</span>
   <sub>0</sub>). Population in each year (t) is computed based on 
   <a ref-type="disp-formula" rid="pone.0207674.e014" href="#pone.0207674.e014">Eq 9</a>: 
   <div id="pone.0207674.e014" class="disp-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e014.jpg" id="pone.0207674.e014g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M14" class="math">
      <div class="mrow">
       <div class="msub">
        <span class="mi">P</span>
        <span class="mi">t</span>
       </div>
       <span class="mo">=</span>
       <div class="msub">
        <span class="mi">P</span>
        <span class="mn">0</span>
       </div>
       <span class="mo">*</span>
       <div class="msup">
        <span class="mi">e</span>
        <div class="mrow">
         <span class="mi">t</span>
         <span class="mo">.</span>
         <span class="mi">r</span>
        </div>
       </div>
      </div>
     </div>
    </div>
    <span class="label">(9)</span>
   </div>
  </p>
 </sec>
 <sec id="sec015" class="sec">
  <div class="title" xmlns="http://www.w3.org/1999/xhtml">Utility agency agent</div>
  <p xmlns="http://www.w3.org/1999/xhtml">The utility agency agent models the decision-making processes of the agency. The renewal decision-making process is affected by revenue, operational and capital expenditures, and capital improvement fund. The initial water price (
   <span class="italic">WP</span>
   <sub>0</sub>) in the model is user-defined ($/gallon). Water price (
   <span class="italic">WP</span>
   <sub>
    <span class="italic">t</span>
   </sub>) can hike annually over the simulation period with a price hike rate (
   <span class="italic">w</span>) based on 
   <a ref-type="disp-formula" rid="pone.0207674.e015" href="#pone.0207674.e015">Eq 10</a>. Accordingly, annual revenue (
   <span class="italic">Rev</span>
   <sub>
    <span class="italic">t</span>
   </sub>) is determined based on that year’s projected water demand (gallon/year) and water price ($/gallon) using 
   <a ref-type="disp-formula" rid="pone.0207674.e016" href="#pone.0207674.e016">Eq 11</a>.
  </p>
  <div id="pone.0207674.e015" class="disp-formula" xmlns="http://www.w3.org/1999/xhtml">
   <div class="alternatives">
    <div xlink:href="pone.0207674.e015.jpg" id="pone.0207674.e015g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
    <div id="M15" class="math">
     <div class="mrow">
      <span class="mi">W</span>
      <div class="msub">
       <span class="mi">P</span>
       <span class="mi">t</span>
      </div>
      <span class="mo">=</span>
      <span class="mi">W</span>
      <div class="msub">
       <span class="mi">P</span>
       <span class="mn">0</span>
      </div>
      <span class="mo">*</span>
      <div class="msup">
       <div class="mrow">
        <div class="mrow">
         <span class="mo">(</span>
         <div class="mrow">
          <span class="mn">1</span>
          <span class="mo">+</span>
          <span class="mi">w</span>
         </div>
         <span class="mo">)</span>
        </div>
       </div>
       <span class="mi">t</span>
      </div>
     </div>
    </div>
   </div>
   <span class="label">(10)</span>
  </div>
  <div id="pone.0207674.e016" class="disp-formula" xmlns="http://www.w3.org/1999/xhtml">
   <div class="alternatives">
    <div xlink:href="pone.0207674.e016.jpg" id="pone.0207674.e016g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
    <div id="M16" class="math">
     <div class="mrow">
      <span class="mi">R</span>
      <span class="mi">e</span>
      <div class="msub">
       <span class="mi">v</span>
       <span class="mi">t</span>
      </div>
      <span class="mo">=</span>
      <div class="msub">
       <span class="mi">D</span>
       <span class="mi">t</span>
      </div>
      <span class="mo">*</span>
      <span class="mi">W</span>
      <div class="msub">
       <span class="mi">P</span>
       <span class="mi">t</span>
      </div>
     </div>
    </div>
   </div>
   <span class="label">(11)</span>
  </div>
  <p xmlns="http://www.w3.org/1999/xhtml">The annual operational expenditure (
   <span class="italic">OpEx</span>), which increases exponentially based on the network average condition (
   <div id="pone.0207674.e017" class="inline-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e017.jpg" id="pone.0207674.e017g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M17" class="math">
      <div accent="true" class="mover">
       <div class="mrow">
        <span class="mi">C</span>
       </div>
       <span class="mo">¯</span>
      </div>
     </div>
    </div>
   </div>), is determined using 
   <a ref-type="disp-formula" rid="pone.0207674.e018" href="#pone.0207674.e018">Eq 12</a> [
   <a rid="pone.0207674.ref047" ref-type="bibr" href="#pone.0207674.ref047">47</a>]: 
   <div id="pone.0207674.e018" class="disp-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e018.jpg" id="pone.0207674.e018g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M18" class="math">
      <div class="mrow">
       <span class="mi">O</span>
       <span class="mi">p</span>
       <span class="mi">E</span>
       <span class="mi">x</span>
       <span class="mo">=</span>
       <div class="msub">
        <span class="mi">U</span>
        <div class="mrow">
         <span class="mi">O</span>
         <span class="mi">p</span>
         <span class="mi">E</span>
         <span class="mi">x</span>
        </div>
       </div>
       <span class="mo">*</span>
       <div class="msub">
        <span class="mi">L</span>
        <span class="mi">N</span>
       </div>
       <span class="mo">*</span>
       <div class="mrow">
        <span class="mo">[</span>
        <div class="mrow">
         <span class="mn">1</span>
         <span class="mo">+</span>
         <div class="mrow">
          <span class="mo">(</span>
          <div class="mrow">
           <span class="mn">1.4877</span>
           <div class="msup">
            <span class="mi">e</span>
            <div class="mrow">
             <div class="mrow">
              <span class="mo">(</span>
              <div class="mrow">
               <span class="mn">0.0449</span>
               <div accent="true" class="mover">
                <span class="mi">C</span>
                <span class="mo">¯</span>
               </div>
              </div>
              <span class="mo">)</span>
             </div>
            </div>
           </div>
          </div>
          <span class="mo">)</span>
         </div>
         <span class="mo">/</span>
         <span class="mn">100</span>
        </div>
        <span class="mo">]</span>
       </div>
      </div>
     </div>
    </div>
    <span class="label">(12)</span>
   </div> where 
   <span class="italic">U</span>
   <sub>
    <span class="italic">OpEx</span>
   </sub> is the unit cost (dollar per mile) for operating and maintaining the network (which is $0.06 million per mile per year based on [
   <a rid="pone.0207674.ref043" ref-type="bibr" href="#pone.0207674.ref043">43</a>]).
  </p>
  <p xmlns="http://www.w3.org/1999/xhtml">The renewal rate depends on the availability of funding for the capital expenditures. The available funding for the pipes renewal equals to the annual revenue minus the operational expenditures. The required funding for capital expenditures of renewing pipes is determined using 
   <a ref-type="disp-formula" rid="pone.0207674.e019" href="#pone.0207674.e019">Eq 13</a>. 
   <div id="pone.0207674.e019" class="disp-formula">
    <div class="alternatives">
     <div xlink:href="pone.0207674.e019.jpg" id="pone.0207674.e019g" mimetype="image" position="anchor" orientation="portrait" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
     <div id="M19" class="math">
      <div class="mrow">
       <span class="mi">C</span>
       <span class="mi">a</span>
       <span class="mi">p</span>
       <span class="mi">E</span>
       <span class="mi">x</span>
       <span class="mo">=</span>
       <div class="msub">
        <span class="mi">U</span>
        <div class="mrow">
         <span class="mi">C</span>
         <span class="mi">a</span>
         <span class="mi">p</span>
         <span class="mi">E</span>
         <span class="mi">x</span>
        </div>
       </div>
       <span class="mo">*</span>
       <span class="mi">R</span>
       <span class="mi">L</span>
      </div>
     </div>
    </div>
    <span class="label">(13)</span>
   </div> where, 
   <span class="italic">U</span>
   <sub>
    <span class="italic">CapEx</span>
   </sub> is the cost of rehabilitation of one mile of pipes with PVC ($1.2 million), and 
   <span class="italic">RL</span> is the length of pipes (mile) with age 100 or more (5% of pipes in condition group 100). If the available funding for capital expenditures is less than the required capital expenditures, the renewal length would be equal to the available funding divided by the unit cost of rehabilitation.
  </p>
  <p xmlns="http://www.w3.org/1999/xhtml">For additional renewal and in order to keep the network performance in terms of break frequency or average condition below the user-defined threshold (i.e., strategy target), the agency would use a capital improvement fund (
   <span class="italic">CIF</span>) in addition to the annual revenues. The 
   <span class="italic">CIF</span> investment is made every five years, and thus the renewal due to 
   <span class="italic">CIF</span> occurs over five years. Hence, each year, up to twenty percent of 
   <span class="italic">CIF</span> is invested for renewal. The annual 
   <span class="italic">CIF</span> allocation would be utilized to implement more pipe renewals in the network after spending the revenue as explained before (i.e., the excessive revenue wouldn’t be used to replenish 
   <span class="italic">CIF</span>). In the model, 
   <span class="italic">CIF</span> ($ Million) is a user-defined input parameter. 
   <a ref-type="fig" rid="pone.0207674.g006" href="#pone.0207674.g006">Fig 6</a> shows the action chart of annual renewal process under the strategy of controlling network average condition. Based on this action chart, the model identifies to what extent (i.e., mile) the renewal process should be conducted every year (as much as the 
   <span class="italic">CIF</span> allows) in order for the network to reach the strategy target (i.e., desired average condition). That is, similarly, for the strategy of break control, the model determines to what extent the renewal process should be conducted in order for the network to reach the desired number of breaks.
  </p>
  <div id="pone.0207674.g006" orientation="portrait" position="float" class="fig" xmlns="http://www.w3.org/1999/xhtml">
   <span pub-id-type="doi" class="object-id">10.1371/journal.pone.0207674.g006</span>
   <span class="label">Fig 6</span>
   <div class="caption">
    <div class="title">Action chart of renewal strategy for controlling network average condition.</div>
   </div>
   <div xlink:href="pone.0207674.g006" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
  </div>
 </sec>
</sec>
