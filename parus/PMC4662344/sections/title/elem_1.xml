<?xml version="1.0" encoding="UTF-8"?>
<sec sec-type="methods" class="sec">
 <div class="title" xmlns="http://www.w3.org/1999/xhtml">Methods</div>
 <sec class="sec">
  <div class="title" xmlns="http://www.w3.org/1999/xhtml">Study system and data collection</div>
  <p xmlns="http://www.w3.org/1999/xhtml">Between 2004 and 2013, during the breeding season (April to August), we monitored 400 nest boxes within 40 farms (10 nest boxes per farm, separated by 50 m, thus covering similar areas on each site) in southern Québec, Canada (covering an area of 10 200 km²) (
   <a ref-type="fig" rid="fig01" href="#fig01">Fig. 1</a>; see Ghilain and Bélisle 
   <a rid="b28" ref-type="bibr" href="#b28">2008</a> for more details on the study system). During this period, each nest box was visited every 2 days to record occupancy and laying date of the first egg (in Julian days; January 1 = Julian day 1). Females were captured during the incubation period, while males were caught during the nestlings’ food provisioning phase. All tree swallows were individually identified with an aluminium band (US Fish and Wildlife Service). Females were aged based on feather colour: brown females were assigned to second-year class (SY) and blue-green females to after second-year class (ASY) (Hussell 
   <a rid="b35" ref-type="bibr" href="#b35">1983</a>). Since 2006, the sex of every individual was confirmed with a molecular technique following Lessard et al. (
   <a rid="b43" ref-type="bibr" href="#b43">2014</a>). In our analysis, we only considered first clutches, that is first breeding event in a nest box of both female and male (if known) within a reproductive season (
   <span class="italic">n</span> = 2273; see 
   <a ref-type="supplementary-material" rid="sd1" href="#sd1">Table A1</a> for details on yearly sample sizes). Second clutches are rare (12.7% of all clutches) and mostly result from first clutch failures.
  </p>
  <div id="fig01" position="float" class="fig" xmlns="http://www.w3.org/1999/xhtml">
   <span class="label">Figure 1</span>
   <div class="caption">
    <p>Distribution of the 40 farms (grey circles) and 10 meteorological stations (white triangles) in the study system in southern Québec. Mean density of breeders on a farm (% of occupied nest boxes) between 2004 and 2013 is represented by different circle sizes (see legend). Forest patches (green), rivers and lakes (blue), other land uses (mostly agriculture; yellow), elevation (100-m black isolines), latitude and longitude (in decimal degrees; thin black lines) are also represented. This figure was created with QGIS 2.0 (QGIS Team Development 
     <a rid="b61" ref-type="bibr" href="#b61">2013</a>).
    </p>
   </div>
   <div xlink:href="eva0008-0933-f1" class="graphic" xmlns:xlink="http://www.w3.org/1999/xlink"/>
  </div>
  <p xmlns="http://www.w3.org/1999/xhtml">Spring temperature (°C) and rainfall (mm) data were obtained in two steps, using information collected from meteorological stations located within the study area (obtained from Environment Canada, 
   <span ext-link-type="uri" xlink:href="http://meteo.gc.ca/" class="ext-link" xmlns:xlink="http://www.w3.org/1999/xlink">http://meteo.gc.ca/</span>; 
   <a ref-type="supplementary-material" rid="sd1" href="#sd1">Table A2</a>; 
   <a ref-type="fig" rid="fig01" href="#fig01">Fig. 1</a>). First, a sliding windows approach was used to determine the most relevant time period suitable for all farms for these two meteorological variables and to guard against potentially misguided 
   <span class="italic">a priori</span> choices (see Brommer et al. 
   <a rid="b11" ref-type="bibr" href="#b11">2008</a> and Porlier et al. 
   <a rid="b59" ref-type="bibr" href="#b59">2012</a> for similar approaches). For this analysis, we used a unique climatic variable value obtained by averaging values from the three meteorological stations nearest from the centroid of our study system (centroid: 45.57°N, −72.64°W; 
   <a ref-type="supplementary-material" rid="sd1" href="#sd1">Table A2</a>). We tested windows varying from 5 to 91 days, from Julian days 60 to 151 (respectively, March 1 and May 31 in nonleap year) for a total of 3828 windows. Pearson’s correlations between annual mean of averaged daily value for each window and annual mean laying dates were used to determine the most relevant period for each environmental variable. The strongest correlation between mean temperature and mean laying date was found between Julian day 96 and 129 (April 6–May 9; 
   <span class="italic">r </span>=
   <span class="italic"> </span>−0.750, 
   <span class="italic">P </span>=
   <span class="italic"> </span>0.012), while for rainfall, this window was between Julian day 128 and 133 (May 8–13; 
   <span class="italic">r </span>=
   <span class="italic"> </span>−0.748, 
   <span class="italic">P </span>=
   <span class="italic"> </span>0.013). As a second step, we used these periods as our references for computing both annual mean temperatures and annual rainfalls (hereafter spring temperature and rainfall) from 10 meteorological stations near our farms (
   <a ref-type="fig" rid="fig01" href="#fig01">Fig. 1</a>; 
   <a ref-type="supplementary-material" rid="sd1" href="#sd1">Table A2</a>; distances range between each farm and the nearest meteorological stations: 1.6–20.1 km), allowing at the same time a fine resolution of the spatial and temporal environmental variation across the study system and a comparison of laying dates among farms in the plasticity analyses.
  </p>
 </sec>
 <sec class="sec">
  <div class="title" xmlns="http://www.w3.org/1999/xhtml">Environmental determinants of laying date at the population level</div>
  <p xmlns="http://www.w3.org/1999/xhtml">We used the annual mean laying dates for each farm (
   <span class="italic">n</span> = 392 as no birds were observed in 8 farm-years; 
   <span class="italic">r </span>=
   <span class="italic"> </span>0.92 between annual mean and median laying dates) to assess both the temporal (interannual) trend in laying and the environmental determinants of laying date. For the temporal trend, we used a linear mixed model to estimate the annual change in mean laying date over the study period (10 years), with farm identity included as random effect. Then, we fitted a linear mixed model to quantify the effects of different environmental variables on mean laying date. The full model included spring temperature, rainfall, breeder density (% of the 10 nest boxes on each farm occupied), elevation (m) and latitude (decimal degree) and all two-way interactions as fixed effects (see also 
   <a ref-type="supplementary-material" rid="sd1" href="#sd1">Table A3</a> for the range limit of each environmental component). We did not include longitude and distance from the St. Lawrence River as they were both highly correlated with elevation (
   <span class="italic">r </span>&gt;
   <span class="italic"> </span>0.9; 
   <a ref-type="fig" rid="fig01" href="#fig01">Fig. 1</a>) (see also Porlier et al. 
   <a rid="b58" ref-type="bibr" href="#b58">2009</a>). All explanatory variables were standardized (zero mean, unit variance; 
   <a ref-type="supplementary-material" rid="sd1" href="#sd1">Table A3</a>) to facilitate the interpretation of their relative influence on mean laying dates. Year and farm identity were tested as random effects using likelihood ratio tests (LRTs), but only year was significant and kept in analyses (but see 
   <a ref-type="supplementary-material" rid="sd1" href="#sd1">Table A4</a> for a model including both year and farm identity as random effects – the selected final model and its effect sizes were similar in both cases).
  </p>
 </sec>
 <sec class="sec">
  <div class="title" xmlns="http://www.w3.org/1999/xhtml">Individual plasticity in laying date</div>
  <p xmlns="http://www.w3.org/1999/xhtml">Individual plasticity in laying date was modelled including only two of three environmental variables that were significant in the population-level analysis (i.e. spring temperature, breeder density; see Results). Although latitude was significant at the population level (see Results), it was not an appropriate variable to assess individual plasticity because it has limited variation for a given individual over its lifetime. In fact, tree swallows can be considered philopatric to their breeding site in our study area as only 8.1% of our observations were indicative of females having dispersed between farms (
   <span class="italic">n</span> = 1015 observations on 397 females, among different breeding events; see Lagrange et al. 
   <a rid="b41" ref-type="bibr" href="#b41">2014</a>). All environmental variables were standardized (zero mean, unit variance; 
   <a ref-type="supplementary-material" rid="sd1" href="#sd1">Table A3</a>). Age was included as a covariate in our models because of its influence on laying date: older females reproduce earlier than younger ones (Stutchbury and Robertson 
   <a rid="b76" ref-type="bibr" href="#b76">1988</a>; Bentz and Siefferman 
   <a rid="b5" ref-type="bibr" href="#b5">2013</a>; this study, see Results), and thus, females sampled in 2004 were excluded as we had no information about their age.
  </p>
  <p xmlns="http://www.w3.org/1999/xhtml">We first assessed the relationship between the difference in laying dates (laying date year 2 – laying date year 1) and the difference in environmental conditions between years (environmental value year 2 – environmental value year 1) for all females breeding in two consecutive years. This analysis was conducted using a linear model and was repeated for three data sets: (i) females observed as SY on the first year (
   <span class="italic">n</span> = 63, refer to as the SY dataset), (ii) females observed as ASY on both years (
   <span class="italic">n</span> = 311, refer to as the ASY dataset) and (iii) all females with age class on the first year as fixed effect (
   <span class="italic">n</span> = 349, refer to as the total dataset). For females breeding in more than two years, we included only the first two consecutive observations in these analyses.
  </p>
  <p xmlns="http://www.w3.org/1999/xhtml">We then investigated individual plasticity and between-individual variation in plasticity (IxE) with a random regression analysis (Nussey et al. 
   <a rid="b53" ref-type="bibr" href="#b53">2007</a>) on females that were observed in at least two years between 2005 and 2013 (
   <span class="italic">n</span> = 935 observations on 370 females). We compared increasing structure complexity of random effects (year, farm, female identity) with LRTs, including random slopes with environmental variables (IxE). Furthermore, because not all individuals experienced the same set of environmental conditions, we used the within-subject centring technique for environmental variables to separate individual variation from population trend (Kreft et al. 
   <a rid="b38" ref-type="bibr" href="#b38">1995</a>; Snijders and Bosker 
   <a rid="b74" ref-type="bibr" href="#b74">1999</a>; van de Pol and Wright 
   <a rid="b56" ref-type="bibr" href="#b56">2009</a>). Hence, each environmental variable (temperature and breeder density) was subdivided into a within-individual (
   <span class="italic">β</span>
   <sub>W</sub>) and a between-individual (
   <span class="italic">β</span>
   <sub>B</sub>) component. Briefly, for each female, we calculated a mean value of temperature and breeder density experienced (i.e. between-individual effect, reflecting the population trend), and for all observations, an individual deviation from these mean values (i.e. within-individual effect, reflecting individual plasticity). The full model included as fixed effects within-individual (
   <span class="italic">β</span>
   <sub>W</sub>) and between-individual (
   <span class="italic">β</span>
   <sub>B</sub>) components of both spring temperature and breeder density and also female age class and latitude to control for their effects. Best linear unbiased predictors (BLUPs) for each female (i.e. individual slope and elevation) were generated from the final model to graphically represent individual-specific plastic response.
  </p>
  <p xmlns="http://www.w3.org/1999/xhtml">All statistical analyses were conducted in the R statistical environment 3.0.2 (R Core Team 
   <a rid="b62" ref-type="bibr" href="#b62">2014</a>). Linear mixed model analyses were performed using the lme4 package (Bates et al. 
   <a rid="b3" ref-type="bibr" href="#b3">2014</a>). Degrees of freedom (Satterhwaite’s approximation) and 
   <span class="italic">P</span>-values of mixed models were calculated using the lmerTest package (Kuznetsova et al. 
   <a rid="b39" ref-type="bibr" href="#b39">2013</a>). Final models were determined by sequentially removing the least significant term from the model based on its 
   <span class="italic">P</span>-value and comparing with a LRT this new model to the previous one, repeatedly until all remaining variables were significant (
   <span class="italic">α </span>= 0.05) (Crawley 
   <a rid="b18" ref-type="bibr" href="#b18">2007</a>).
  </p>
 </sec>
</sec>
